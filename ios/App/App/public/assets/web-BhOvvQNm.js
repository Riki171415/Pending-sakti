import{W as m}from"./index-BbQKxbvR.js";class b extends m{async printBase64(e){const{data:n,mimeType:o,name:i}=e,t=atob(n),r=new Array(t.length);for(let c=0;c<t.length;c++)r[c]=t.charCodeAt(c);const s=new Uint8Array(r),l=new Blob([s],{type:o}),a=URL.createObjectURL(l);await this.printFromUrl(a,i),URL.revokeObjectURL(a)}async printFile(e){const{path:n,name:o}=e;await this.printFromUrl(n,o)}async printHtml(e){const{html:n,name:o}=e,i=new Blob([n],{type:"text/html"}),t=URL.createObjectURL(i);await this.printFromUrl(t,o),URL.revokeObjectURL(t)}async printPdf(e){const{path:n,name:o}=e;await this.printFromUrl(n,o)}async printWebView(e){const n=document.title;e?.name&&(document.title=e.name),window.print(),document.title=n}async getPluginVersion(){return{version:"7.0.0"}}async printFromUrl(e,n){return new Promise((o,i)=>{const t=document.createElement("iframe");t.style.position="fixed",t.style.right="0",t.style.bottom="0",t.style.width="0",t.style.height="0",t.style.border="none",t.onload=()=>{try{n&&t.contentDocument&&(t.contentDocument.title=n),setTimeout(()=>{try{const r=t.contentWindow;if(!r)throw new Error("Cannot access iframe window");r.focus(),r.print(),setTimeout(()=>{document.body.removeChild(t),o()},100)}catch(r){document.body.removeChild(t),i(r)}},100)}catch(r){document.body.removeChild(t),i(r)}},t.onerror=()=>{document.body.removeChild(t),i(new Error("Failed to load content for printing"))},document.body.appendChild(t),t.src=e})}}export{b as PrinterWeb};
